# Run a docker container, (-d) run detached, (-p) bind it to a port, 3000 of docker-machine
# to 3000 of container, (--name) name it, (-v) link physical space on host, (-e) set environmental
# variables, (-w) set working dir, use the python:2-slim image, (bash) use bash to (-c) run commands
# inside the container. The commands will: update apt repository, upgrade it replying with (-y) yes
# to prompts, use pip to install flask and run flask with the host at 0.0.0.0 and bind it to port 3000
# of the container

docker run -d -p 3000:3000 --name Abathur -v /home/docker/:/root -e FLASK_APP=app.py -w /root python:2-slim bash -c "apt update && apt upgrade -y && python -m pip install --upgrade pip && pip install flask && flask run -h 0.0.0.0 -p 3000"

# app.py needs to be created with the following content and then copied into the container:

/*
from flask import Flask

app = Flask(__name__)
@app.route('/')
def msg():
    return '<marquee><h1>Hello World</h1></marquee>'
*/

# Wait for the docker to finish installing the pacages then run this command to copy the app.py file
# into the container. The file will be at root on the Char virtual-machine.

docker cp app.py Abathur:/root
